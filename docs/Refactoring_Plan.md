# 향후 코드 개선을 위한 리팩토링 계획

이 문서는 현재 완성된 기능의 코드를 더 깔끔하고, 유지보수하기 쉽고, 이해하기 좋은 구조로 개선하기 위한 리팩토링 계획을 담고 있습니다.

---

### 1단계: `Board.tsx` 컴포넌트 리팩토링 (가독성 및 구조 개선)

현재 `Board.tsx`는 너무 많은 역할을 담당하고 있습니다. 이를 역할에 따라 분리하여 코드의 복잡도를 낮춥니다.

- **`HexTile` 컴포넌트 분리:**
  - 타일 하나(`path`)와 그 위의 기물(`PieceComponent`)을 렌더링하는 `HexTile` 컴포넌트를 새로 만듭니다.
  - `Board.tsx`는 이 `HexTile` 컴포넌트를 보드 데이터에 따라 반복해서 그리는 역할만 담당하게 하여 코드를 단순화합니다.

- **커스텀 훅(Custom Hook) 도입:**
  - 타일의 상태(선택 여부, 이동 가능 여부 등)를 판단하는 로직을 `useTileState(tile)`와 같은 커스텀 훅으로 분리합니다.
  - 이렇게 하면 `Board.tsx`의 렌더링 부분에서 복잡한 조건문이 사라지고, "이 타일의 상태는 무엇인가?"라는 질문에 대한 답을 커스텀 훅으로부터 얻어와 간결하게 사용할 수 있습니다.

---

### 2단계: 데이터 처리 방식 개선 (전처리 스크립트 도입)

`Board.tsx` 파일 내에서 SVG 경로를 분석하여 중심점을 찾는 로직(`getPathCenter`)은 컴포넌트의 핵심 로직과 관계가 적고, 런타임에 불필요한 부담을 줄 수 있습니다.

- **전처리 스크립트 도입:**
  - `pnpm generate-board-data`와 같은 별도의 스크립트를 만듭니다.
  - 이 스크립트가 빌드 과정이나 필요할 때 미리 실행되어, `board-data.ts`의 SVG 경로를 분석하고 각 타일의 중심점(`center`)까지 모두 계산된 `board-layout.ts` 같은 최종 데이터 파일을 생성하게 합니다.
  - `Board.tsx`는 이 미리 계산된 데이터를 가져다 쓰기만 하면 되므로, 컴포넌트 내에서 복잡한 데이터 처리 로직이 완전히 사라지고 런타임 성능도 향상됩니다.

---

### 3단계: 프로젝트 품질 향상

장기적인 관점에서 프로젝트의 안정성과 개발 편의성을 높이는 방법입니다.

- **Storybook 도입:**
  - UI 컴포넌트들을 분리해서 개발하고 테스트할 수 있는 도구입니다. `PieceComponent`나 위에서 제안한 `HexTile` 컴포넌트를 Storybook에서 시각적으로 확인하며 개발하면, 전체 게임을 실행하지 않고도 컴포넌트의 다양한 상태를 쉽게 테스트하고 문서화할 수 있습니다.

- **테스트 코드 작성:**
  - `getPathCenter`와 같은 순수 함수나, "타일을 클릭했을 때 올바른 함수가 호출되는지"와 같은 컴포넌트의 동작을 검증하는 단위 테스트를 작성하면, 나중에 코드를 변경하더라도 기능이 고장 나지 않았는지 자신감을 가질 수 있습니다.
